webpackJsonp([1],[,,,,,,,,,,,,function(t,s,e){"use strict";var a=e(2),i=e(69),n=e(55),o=e.n(n),r=e(58),l=e.n(r),c=e(57),u=e.n(c);a.a.use(i.a),s.a=new i.a({linkActiveClass:"active",mode:"history",routes:[{path:"/",redirect:"/goods"},{path:"/goods",component:o.a},{path:"/seller",component:l.a},{path:"/ratings",component:u.a}]})},function(t,s){},function(t,s,e){function a(t){e(42)}var i=e(1)(e(33),e(61),a,null,null);t.exports=i.exports},,,,,,,,,,,,,,,,,,function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(2),i=e(14),n=e.n(i),o=e(12),r=e(13);e.n(r);a.a.config.productionTip=!1,new a.a({el:"#app",router:o.a,template:"<App/>",components:{App:n.a}})},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(56),i=e.n(a),n=e(4),o=e.n(n);s.default={name:"app",data:function(){return{seller:{}}},created:function(){var t=this;o()({method:"get",url:"/api/seller"}).then(function(s){0===s.data.erron&&(t.seller=s.data.data)}).catch(function(t){console.log(t),alert("网络错误，不能访问")})},components:{"v-header":i.a},methods:{},watch:{}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(2);s.default={props:{food:{type:Object}},created:function(){},methods:{addCart:function(){this.food.count?this.food.count++:a.a.set(this.food,"count",1),this.$emit("cartadd",event.target)},cartDecrease:function(){this.food.count--},beforeDestroy:function(){this.$off("cartadd",event.target)}}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(4),i=e.n(a),n=e(41),o=e(59),r=e.n(o),l=e(54),c=e.n(l);s.default={props:{seller:{type:Object}},data:function(){return{goods:[],heightMap:[],scrollY:0}},computed:{menuIndex:function(){for(var t=0,s=this.heightMap.length;t<s;t++){var e=this.heightMap[t],a=this.heightMap[t+1];if(!a||this.scrollY>=e&&this.scrollY<a)return t}},selectFoods:function(){var t=[];return this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})}),t}},created:function(){var t=this;i()({method:"get",url:"/api/goods"}).then(function(s){0===s.data.erron&&(t.goods=s.data.data,t.$nextTick(function(){t._initScroll(),t._calculateHeight()}))}).catch(function(t){console.log(t),alert("网络错误，不能访问")}),this.classMap=["decrease","discount","special","invoice","guarantee"]},methods:{_initScroll:function(){var t=this;this.menuScroll=new n.a(this.$refs.menu,{scrollY:!0,click:!0}),this.foodsScroll=new n.a(this.$refs.foods,{scrollY:!0,click:!0,probeType:3}),this.foodsScroll.on("scroll",function(s){t.scrollY=Math.abs(Math.floor(s.y));var e=document.querySelector(".foods-wrapper").clientHeight;t.scrollY+e>=t.heightMap[t.heightMap.length-1]-10&&(t.scrollY=t.heightMap[t.heightMap.length-1]-10)})},_calculateHeight:function(){this.heightMap=[];var t=document.querySelectorAll(".food-list"),s=0;this.heightMap.push(s);for(var e=0,a=t.length;e<a;e++)s+=t[e].clientHeight,this.heightMap.push(s)},_drop:function(t){this.$refs.shopcart.drop(t)},checkedMenu:function(t){var s=document.querySelectorAll(".food-list");this.foodsScroll.scrollToElement(s[t],200)}},components:{shopCart:r.a,cartcontrol:c.a}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(60),i=e.n(a);s.default={props:{seller:{type:Object}},data:function(){return{detailShow:!1}},methods:{showDetail:function(){this.detailShow=!0},closeDetail:function(){this.detailShow=!1}},created:function(){this.classMap=["decrease","discount","special","invoice","guarantee"]},components:{star:i.a}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(53),i=e.n(a);s.default={props:{minPrice:{type:Number,default:25},seller:{type:Object,default:{}},selectFoods:{type:Array,default:function(){return[{price:22,count:1}]}}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[]}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.price*s.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(s){t+=s.count}),t},payDesc:function(){if(0===this.totalPrice)return"￥"+this.minPrice+"起送";if(this.totalPrice<this.minPrice){return"还差￥"+(this.minPrice-this.totalPrice)+"起送"}return"去结算"}},methods:{drop:function(t){for(var s=0,e=this.balls.length;s<e;s++){var a=this.balls[s];if(!a.show)return a.show=!0,a.el=t,void this.dropBalls.push(a)}},beforeEnter:function(t){t.style.opacity=0},enter:function(t,s){var e=this.dropBalls.length,a=this.dropBalls[e-1];if(a.show){var n=a.el.getBoundingClientRect();t.style.top=n.top+"px",t.style.left=n.left+"px";var o=-(n.left-40),r=window.innerHeight-n.top-28;i()(t,{opacity:1,translateY:r+"px"},400,[.49,-.29,.75,.41],{complete:s});var l=t.getElementsByClassName("inner-hook");i()(l,{opacity:1,translateX:o+"px"},400,{complete:s})}},leave1:function(t,s){console.log(123)}}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.default={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},starClass:function(){for(var t=Math.floor(2*this.score)/2,s=Math.floor(t),e=t%1!=0,a=[],i=0;i<s;i++)a.push("on");for(e&&a.push("half");a.length<5;)a.push("off");return a}}}},,function(t,s){},function(t,s){},function(t,s){},function(t,s){},function(t,s){},function(t,s){},function(t,s){},function(t,s){},,,,,function(t,s,e){function a(t){e(45)}var i=e(1)(e(34),e(64),a,null,null);t.exports=i.exports},function(t,s,e){function a(t){e(46)}var i=e(1)(e(35),e(65),a,null,null);t.exports=i.exports},function(t,s,e){function a(t){e(47)}var i=e(1)(e(36),e(66),a,null,null);t.exports=i.exports},function(t,s,e){function a(t){e(43)}var i=e(1)(e(37),e(62),a,null,null);t.exports=i.exports},function(t,s,e){function a(t){e(48)}var i=e(1)(e(38),e(67),a,null,null);t.exports=i.exports},function(t,s,e){function a(t){e(44)}var i=e(1)(e(39),e(63),a,null,null);t.exports=i.exports},function(t,s,e){function a(t){e(49)}var i=e(1)(e(40),e(68),a,null,null);t.exports=i.exports},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"header"},[e("v-header",{attrs:{seller:t.seller}})],1),t._v(" "),e("div",{staticClass:"tab border-1px"},[e("router-link",{staticClass:"tab-item",attrs:{to:"/goods"}},[t._v("商品")]),t._v(" "),e("router-link",{staticClass:"tab-item",attrs:{to:"/ratings"}},[t._v("評論")]),t._v(" "),e("router-link",{staticClass:"tab-item",attrs:{to:"/seller"}},[t._v("商家")])],1),t._v(" "),e("router-view",{attrs:{seller:t.seller}})],1)},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement;return(t._self._c||s)("div",[t._v("\nratings\n    ")])},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopcart"},[e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"logo-wrapper"},[e("div",{staticClass:"logo logo-hook",class:{highlight:t.totalCount>0}},[e("span",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),t._v(" "),e("div",{staticClass:"price"},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.seller.deliveryPrice))])]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"pay",class:{"not-enought":t.totalPrice<t.minPrice,enought:t.totalPrice>=t.minPrice}},[t._v("\n        "+t._s(t.payDesc)+"\n      ")])])]),t._v(" "),e("div",{staticClass:"ball-container"},[e("transition-group",{attrs:{name:"drop",tag:"ul"},on:{"before-enter":t.beforeEnter,enter:t.enter,leave:t.leave1}},t._l(t.balls,function(t,s){return e("li",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"ball.show"}],key:s,staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])}))],1)])},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartcontrol"},[e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-decrease",on:{click:t.cartDecrease}},[e("span",{staticClass:"inner icon-remove_circle_outline"})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),t._v(" "),e("div",{staticClass:"cart-add icon-add_circle",on:{click:t.addCart}})],1)},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("div",{ref:"menu",staticClass:"menu-wrapper"},[e("ul",t._l(t.goods,function(s,a){return e("li",{staticClass:"menu-item",class:{active:a===t.menuIndex},on:{click:function(s){t.checkedMenu(a)}}},[e("span",{staticClass:"text border-1px"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.type>0,expression:"item.type>0"}],staticClass:"icon",class:t.classMap[s.type]}),t._v(t._s(s.name)+"\n        ")])])}))]),t._v(" "),e("div",{ref:"foods",staticClass:"foods-wrapper"},[e("ul",t._l(t.goods,function(s){return e("li",{staticClass:"food-list"},[e("h1",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),e("ul",t._l(s.foods,function(s){return e("li",{staticClass:"food-item"},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:s.icon,alt:"",width:"57",height:"57"}})]),t._v(" "),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),e("p",{staticClass:"desc"},[t._v(t._s(s.description))]),t._v(" "),e("div",{staticClass:"extra"},[e("span",{staticClass:"left"},[t._v("月售"+t._s(s.sellCount))]),e("span",[t._v("好评率"+t._s(s.rating))])]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"rmb"},[t._v("￥")]),e("span",{staticClass:"now"},[t._v(t._s(s.price))]),e("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))])]),t._v(" "),e("div",{staticClass:"cartcontrol-wrapper"},[e("cartcontrol",{attrs:{food:s},on:{cartadd:t._drop}})],1)])])}))])}))]),t._v(" "),e("shop-cart",{ref:"shopcart",attrs:{"select-foods":t.selectFoods,seller:t.seller}})],1)},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"64",height:"64",src:t.seller.avatar,alt:""}})]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),t._v(" "),e("div",{staticClass:"description"},[t._v(t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达")]),t._v(" "),t.seller.supports?e("div",{staticClass:"support"},[e("span",{staticClass:"icon",class:t.classMap[t.seller.supports[0].type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t._v(" "),t.seller.supports?e("div",{staticClass:"support-count",on:{click:t.showDetail}},[e("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),t._v(" "),e("div",{staticClass:"bulletin-wrapper"},[e("span",{staticClass:"bulletin-title"}),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]),t._v(" "),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,alt:"",width:"100%",height:"200%"}})]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"detail"},[e("div",{staticClass:"detail-wrapper"},[e("div",{staticClass:"main"},[e("div",{staticClass:"name"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{staticClass:"score"},[e("star",{attrs:{size:48,score:t.seller.score}})],1),t._v(" "),e("div",{staticClass:"line-title"},[e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"text"},[t._v("优惠信息")]),t._v(" "),e("div",{staticClass:"line"})]),t._v(" "),e("div",{staticClass:"supports"},t._l(t.seller.supports,function(s){return e("div",{staticClass:"support-item"},[e("span",{staticClass:"icon",class:t.classMap[s.type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(s.description))])])})),t._v(" "),e("div",{staticClass:"line-title"},[e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"text"},[t._v("商家公告")]),t._v(" "),e("div",{staticClass:"line"})]),t._v(" "),e("div",{staticClass:"bulletin"},[e("p",{staticClass:"text"},[t._v(t._s(t.seller.bulletin))])])])]),t._v(" "),e("div",{staticClass:"detail-close",on:{click:t.closeDetail}},[e("i",{staticClass:"icon-close"})])])])],1)},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement;return(t._self._c||s)("div",[t._v("\nseller\n    ")])},staticRenderFns:[]}},function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"star",class:t.starType},t._l(t.starClass,function(t){return e("span",{staticClass:"star-item",class:t})}))},staticRenderFns:[]}}],[32]);
//# sourceMappingURL=app.e60b79bffc619aa40b99.js.map